{"ast":null,"code":"var _jsxFileName = \"C:\\\\assignment\\\\task-manager-frontend\\\\src\\\\pages\\\\EditTask.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport API from \"../api/axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditTask() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  const user = JSON.parse(localStorage.getItem(\"user\")); // Get logged-in user\n  const [users, setUsers] = useState([]);\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    status: \"incomplete\",\n    assignedTo: \"\"\n  });\n\n  // Redirect non-admin users away from edit page\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.role) !== \"admin\") {\n      navigate(\"/\");\n    }\n  }, [user, navigate]);\n\n  // Fetch users (only if admin)\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.role) === \"admin\") {\n      API.get(\"/users\", {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      }).then(res => setUsers(res.data)).catch(err => console.error(err));\n    }\n  }, [user]);\n\n  // Fetch task details\n  useEffect(() => {\n    API.get(`/tasks/${id}`, {\n      headers: {\n        Authorization: `Bearer ${user.token}`\n      }\n    }).then(res => setFormData(res.data)).catch(err => console.error(err));\n  }, [id, user.token]);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      await API.put(`/tasks/${id}`, formData, {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      });\n      navigate(\"/dashboard\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-xl mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Edit Task\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: formData.title,\n        onChange: handleChange,\n        placeholder: \"Title\",\n        className: \"w-full border px-4 py-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        placeholder: \"Description\",\n        className: \"w-full border px-4 py-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"status\",\n        value: formData.status,\n        onChange: handleChange,\n        className: \"w-full border px-4 py-2 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"incomplete\",\n          children: \"Incomplete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"complete\",\n          children: \"Complete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), (user === null || user === void 0 ? void 0 : user.role) === \"admin\" && /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"assignedTo\",\n        value: formData.assignedTo,\n        onChange: handleChange,\n        className: \"w-full border px-4 py-2 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Assign to user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), users.map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: u._id,\n          children: u.email\n        }, u._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",\n        children: \"Update Task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(EditTask, \"3wmtxhB+rcjOqQCwC/rkzqZehQg=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = EditTask;\nvar _c;\n$RefreshReg$(_c, \"EditTask\");","map":{"version":3,"names":["useEffect","useState","useNavigate","useParams","API","jsxDEV","_jsxDEV","EditTask","_s","navigate","id","user","JSON","parse","localStorage","getItem","users","setUsers","formData","setFormData","title","description","status","assignedTo","role","get","headers","Authorization","token","then","res","data","catch","err","console","error","handleChange","e","target","name","value","handleSubmit","preventDefault","put","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","placeholder","map","u","_id","email","_c","$RefreshReg$"],"sources":["C:/assignment/task-manager-frontend/src/pages/EditTask.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport API from \"../api/axios\";\r\n\r\nexport default function EditTask() {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const user = JSON.parse(localStorage.getItem(\"user\")); // Get logged-in user\r\n  const [users, setUsers] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    status: \"incomplete\",\r\n    assignedTo: \"\",\r\n  });\r\n\r\n  // Redirect non-admin users away from edit page\r\n  useEffect(() => {\r\n    if (user?.role !== \"admin\") {\r\n      navigate(\"/\");\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  // Fetch users (only if admin)\r\n  useEffect(() => {\r\n    if (user?.role === \"admin\") {\r\n      API.get(\"/users\", {\r\n        headers: { Authorization: `Bearer ${user.token}` },\r\n      })\r\n        .then((res) => setUsers(res.data))\r\n        .catch((err) => console.error(err));\r\n    }\r\n  }, [user]);\r\n\r\n  // Fetch task details\r\n  useEffect(() => {\r\n    API.get(`/tasks/${id}`, {\r\n      headers: { Authorization: `Bearer ${user.token}` },\r\n    })\r\n      .then((res) => setFormData(res.data))\r\n      .catch((err) => console.error(err));\r\n  }, [id, user.token]);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await API.put(`/tasks/${id}`, formData, {\r\n        headers: { Authorization: `Bearer ${user.token}` },\r\n      });\r\n      navigate(\"/dashboard\");\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto p-4\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Edit Task</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          value={formData.title}\r\n          onChange={handleChange}\r\n          placeholder=\"Title\"\r\n          className=\"w-full border px-4 py-2 rounded\"\r\n        />\r\n        <textarea\r\n          name=\"description\"\r\n          value={formData.description}\r\n          onChange={handleChange}\r\n          placeholder=\"Description\"\r\n          className=\"w-full border px-4 py-2 rounded\"\r\n        />\r\n        <select\r\n          name=\"status\"\r\n          value={formData.status}\r\n          onChange={handleChange}\r\n          className=\"w-full border px-4 py-2 rounded\"\r\n        >\r\n          <option value=\"incomplete\">Incomplete</option>\r\n          <option value=\"complete\">Complete</option>\r\n        </select>\r\n\r\n        {/* Only show assignedTo dropdown to admins */}\r\n        {user?.role === \"admin\" && (\r\n          <select\r\n            name=\"assignedTo\"\r\n            value={formData.assignedTo}\r\n            onChange={handleChange}\r\n            className=\"w-full border px-4 py-2 rounded\"\r\n          >\r\n            <option value=\"\">Assign to user</option>\r\n            {users.map((u) => (\r\n              <option key={u._id} value={u._id}>\r\n                {u.email}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\r\n        >\r\n          Update Task\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}